# Foodgram
### О проекте.
Представляю вам проект, созданный во время обучения в Яндекс Практикуме. Этот проект — часть учебного курса, но он создан полностью самостоятельно.

Цель этого сайта — дать возможность пользователям создавать и хранить рецепты на онлайн-платформе. Кроме того, можно скачать список продуктов, необходимых для приготовления блюда, просмотреть рецепты друзей и добавить любимые рецепты в список избранных.

Чтобы использовать все возможности сайта — нужна регистрация. Проверка адреса электронной почты не осуществляется, вы можете ввести любой email.

Заходите и делитесь своими любимыми рецептами!
___
### Информация об авторах.
- Акчурин Лев Ливатович.<br>Студент курса Яндекс Практикума Python-разработчик плюс.<br>
___
### При создании проекта использовалось:
- язык программирования Python версии 3.9.13;
- фреймворк Django версии 3.2.3;
- фреймворк Django Rest Framework версии 3.12.4;
- библиотека djoser версии 2.1.0;
- библиотека Pillow версии 9.0.0;
- базы данных выполнены на PostgreSQL;
- библиотека psycopg2-binary версии 2.9.3;
- API реализуется с использованием JSON;
- frontend выполнен с использованием языка программирования JavaScript.
___
### Как развернуть проект.
<br>**Проект рассчитан на операционную систему Linux.**<br>
Чтобы развернуть проект необходимо следующие:
- Форкнуть проект себе на репозиторий с:
```
https://github.com/levisserena/foodgram
```

>*активная ссылка под этой кнопкой* -> [КНОПКА](https://github.com/levisserena/foodgram)
- Клонировать репозиторий со своего GitHub и перейти в него в командной строке:

```
git clone https://github.com/<имя вашего акаунта>/kittygram_final.git
```
<br>**Разворачивание проекта происходит с помощью [Docker](https://www.docker.com/).**<br>
<br>В терминале прейдите в директорию `ingra`, создайте файл `.env`. В этом файле будут прописаны ваши переменные окружения - подробнее смотрите в файле `.env.example`.<br>В системе с настроенным Docker введите в терминале (находясь в директории `ingra`) команду:
```
docker compose up
```
Будут собраны контейнеры и запущен проект.
<br>Также можно использовать команду:<br>
```
docker compose -f docker-compose.production.yml up 
```
Образы будут скачены с [docker
hub](https://hub.docker.com/), что гораздо удобнее, при разворачивание на удаленном сервере. Скачать файл `docker-compose.production.yml` можно, например, командой:
```
scp -i path_to_SSH/SSH_name docker-compose.production.yml \
    username@server_ip:/home/username/taski/docker-compose.production.yml 
```
Не забудьте рядом с `docker-compose.production.yml` скачать таким же образом файл `nginx.conf` и файл `.env` (`.env` нужно предварительно создать, можно создать сразу на удаленном сервере и там заполнить).

Где:
  - path_to_SSH — путь к файлу с SSH-ключом;
  - SSH_name — имя файла с SSH-ключом (без расширения);
  - username — ваше имя пользователя на сервере;
  - server_ip — IP вашего сервера.

<br>Для запуска Docker Compose в режиме демона используем команду:<br>
```
sudo docker compose -f docker-compose.production.yml up -d
```
<br>*Каким из методом развертывания контейнеров пользоваться - решать вам.*<br>
___
После развертывания необходимо выполнить миграции:
```
docker compose exec backend python manage.py migrate
```
Собрать статику Django:
```
docker compose exec backend python manage.py collectstatic
```
```
docker compose exec backend cp -r /app/collected_static/. /static/static/
```
Однако рекомендую воспользоваться готовыми скриптами `.sh`:
```
sudo docker compose -f docker-compose.production.yml exec backend sh scripts_sh/prod.sh
```
Подробнее про скрипты читайте в `backend/scripts_sh/Readme.txt`

После настройки внешнего прокси-сервера проект готов к работе. Внутренний прокси-сервер "слушает" порт 8077.

___
### Некоторые эндпоинты API.
Далее 127.0.0.1:8000 - при развертывание локально, в остальных случаях, необходим реальный IP или доменное имя.
- Страница списка пользователей.
```
http://127.0.0.1:8000/api/users/
```
- Страница списка рецептов.
```
http://127.0.0.1:8000/api/recipes/
```
- Страница списка ингридиентов.
```
http://127.0.0.1:8000/api/ingredients/
```
- Доступ в админ зону.
```
http://127.0.0.1:8000/admin
```
___
___
_Подробнее по эндпоинтам и по примерам запросов можно посмотрев в файле проекта_ `docs/openapi-schema.yml`_, используя для этого, например, [Seagger](https://editor.swagger.io/)._
_Если проект развернут в контейнерах по с настройками_ `infra/docker-compose.yml` _то по адресу:_ 
```
http://localhost:8077/api/docs/
```
_будет доступен этот же redoc._
